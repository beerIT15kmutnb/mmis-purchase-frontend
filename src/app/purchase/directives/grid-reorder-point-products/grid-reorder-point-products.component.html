<div [clrLoading]="loading">
  <clr-datagrid>
    <clr-dg-column>ชื่อเวชภัณฑ์ (Trade name)</clr-dg-column>
    <clr-dg-column>ผู้จัดจำหน่าย</clr-dg-column>
    <clr-dg-column>คงเหลือ (Package)</clr-dg-column>
    <clr-dg-column>คงเหลือ (Base Unit)</clr-dg-column>
    <clr-dg-column>ราคาต่อ Pack</clr-dg-column>
    <clr-dg-column>เลขที่สัญญา</clr-dg-column>
    <clr-dg-column>ซื้อล่าสุด</clr-dg-column>
    <clr-dg-column>ราคา</clr-dg-column>
    <clr-dg-column style="width: 50px;">#</clr-dg-column>
    <clr-dg-placeholder>ไม่พบรายการเวชภัณฑ์สำหรับจ่าย</clr-dg-placeholder>
    <clr-dg-row *clrDgItems="let i of items; let idx = index;" [clrDgItem]="i">
      <clr-dg-cell>{{ i.product_name }}</clr-dg-cell>
      <clr-dg-cell>{{ i.v_labeler_name }}</clr-dg-cell>
      <clr-dg-cell style="text-align: right;">{{ i.remain_qty/i.conversion_qty | number }} {{ i.from_unit_name }} ({{i.conversion_qty | number}} {{i.to_unit_name}})</clr-dg-cell>
      <clr-dg-cell style="text-align: right;">
        {{i.remain_qty || 0 | number}} {{i.to_unit_name}}
      </clr-dg-cell>
      <!-- <clr-dg-cell>
        <input type="text" #qty (keyup)="onChangeQty(i, qty.value)" style="width: 100%; text-align: right; background-color:#FFF9C4"
          placeholder="0" appNumberWithoutDot [value]="i.order_qty">
      </clr-dg-cell> -->
      <!-- <clr-dg-cell>
         <app-select-box-units (onChange)="onChangeUnit($event, i)" [genericId]="i.generic_id"></app-select-box-units>
      </clr-dg-cell> -->
      <clr-dg-cell style="text-align: right;">
        {{i.purchase_cost || 0 | number: '1.2-2'}}
      </clr-dg-cell>
      <!-- <clr-dg-cell style="text-align: right;">
        {{i.order_qty*i.purchase_conversion_qty | number}} {{i.to_unit_name}}
      </clr-dg-cell> -->
      <clr-dg-cell>{{i.contract_no}}</clr-dg-cell>
      <clr-dg-cell>{{i.last_purchased_date | toThaiDate}}</clr-dg-cell>
      <clr-dg-cell>{{i.last_purchased_unit_price | number: '1.2-2'}}</clr-dg-cell>

      <clr-dg-cell style="text-align: center;">
        <button class="btn btn-sm btn-success wm-small-btn" (click)="addPurchase(i)">
          รอจัดซื้อ
        </button>
      </clr-dg-cell>
    </clr-dg-row>
  </clr-datagrid>
</div>
